# API providers
OPENAI_API_KEY=
# RunPod Serverless v2 configuration for self-hosted lip-sync inference.
# Either provide RUNPOD_ENDPOINT_ID (recommended) or explicit RUNPOD_RUN_URL + RUNPOD_STATUS_URL_TEMPLATE.
RUNPOD_API_KEY=
RUNPOD_API_BASE=https://api.runpod.ai/v2
RUNPOD_ENDPOINT_ID=
RUNPOD_RUN_URL=
RUNPOD_STATUS_URL_TEMPLATE=
RUNPOD_REQUEST_TIMEOUT_SECONDS=30
# Lower poll interval returns completed jobs faster (at the cost of more status calls).
RUNPOD_POLL_INTERVAL_SECONDS=0.4
RUNPOD_JOB_TIMEOUT_SECONDS=120
LIPSYNC_MODEL_NAME=musetalk
# Optional: use your own lip-sync server (e.g. on a GPU pod you SSH into). No RunPod API needed.
# POST same payload (image + audio base64); response JSON with video_url or result_url or url.
# If you run Deckard + the lip-sync server on the same GPU pod, prefer localhost for lowest latency:
# LIPSYNC_DIRECT_URL=http://127.0.0.1:8001/generate
LIPSYNC_DIRECT_URL=
LIPSYNC_DIRECT_TIMEOUT_SECONDS=120
# If LIPSYNC_DIRECT_URL is a proxy root, this path is tried first.
LIPSYNC_DIRECT_PREFERRED_PATH=/generate
# Trim quiet head/tail audio before lip-sync to reduce payload and inference time.
LIPSYNC_TRIM_SILENCE=true
LIPSYNC_SILENCE_THRESHOLD=500
LIPSYNC_SILENCE_PAD_MS=120
# Optional hard cap for long assistant turns (seconds). 0 disables truncation.
LIPSYNC_MAX_AUDIO_SECONDS=0

# Response delivery mode:
# - synced: wait for lip-sync coordination for best realism
# - fast: stream audio immediately and generate video opportunistically
RESPONSE_MODE_DEFAULT=synced

# Legacy D-ID settings kept for compatibility with older branches (unused in MVP path).
DID_API_KEY=
DID_SOURCE_URL_JOI=
DID_SOURCE_URL_OFFICER_K=
DID_SOURCE_URL_OFFICER_J=

# Supabase
SUPABASE_URL=
SUPABASE_SERVICE_ROLE_KEY=

# Memory guardrails
MEMORY_MAX_LOCAL_ENTRIES=80
MEMORY_MAX_RECALL_ITEMS=5
MEMORY_MAX_SUMMARY_CHARS=650
MEMORY_LOCAL_TTL_SECONDS=86400
MEMORY_DEDUPE_WINDOW_SECONDS=900
MEMORY_REMOTE_TIMEOUT_SECONDS=0.45
MEMORY_REMOTE_CACHE_TTL_SECONDS=30

# Startup safety checks
ENABLE_SECRET_SAFETY_CHECKS=true

# Application configuration
LOG_LEVEL=INFO
